@import url('https://fonts.googleapis.com/css2?family=Manrope:wght@300;400;500;600;700;800&family=Noto+Serif+Display:ital,wght@0,400;0,700;1,400;1,700&display=swap');

*{margin:0;padding:0;box-sizing:border-box}
:root{
  --bg:#050506;--s1:#0c0c0e;--s2:#131316;--s3:#1a1a1e;
  --bd:#222226;--bd2:#2c2c32;
  --t1:#f2f2f3;--t2:#8a8a96;--t3:#55555f;--t4:#38383f;
  --w:#ffffff;--grn:#1ed760;
  --fd:'Noto Serif Display',Georgia,serif;
  --fb:'Manrope',system-ui,sans-serif;
}
.shell{min-height:100vh;background:var(--bg);color:var(--t1);font-family:var(--fb);-webkit-font-smoothing:antialiased;overflow-x:hidden}
.scr{max-width:520px;margin:0 auto;padding:24px 20px;min-height:100vh;position:relative}

/* ═══ LANDING ═══ */
.landing{display:flex;flex-direction:column;justify-content:flex-end;padding-bottom:40px;opacity:0}
.landing.in{opacity:1;transition:opacity .8s ease}
.l-bg{position:fixed;top:0;left:50%;transform:translateX(-50%);width:520px;max-width:100vw;height:60vh;display:grid;grid-template-columns:repeat(3,1fr);grid-template-rows:repeat(2,1fr);gap:3px;overflow:hidden}
.l-bg-tile{opacity:0;animation:tileIn 1.2s calc(var(--i)*.15s) forwards;overflow:hidden}
.l-bg-tile .art{animation:slowZoom 20s ease-in-out infinite alternate}
@keyframes tileIn{from{opacity:0;transform:scale(1.1)}to{opacity:1;transform:scale(1)}}
@keyframes slowZoom{from{transform:scale(1)}to{transform:scale(1.08)}}
.l-bg-fade{position:absolute;inset:0;background:linear-gradient(180deg,transparent 0%,rgba(5,5,6,.3) 30%,rgba(5,5,6,.85) 60%,var(--bg) 85%);pointer-events:none}
.l-body{position:relative;z-index:2;margin-top:auto}
.l-tag{font-size:10px;font-weight:700;letter-spacing:4px;text-transform:uppercase;color:var(--t3);margin-bottom:20px}
.l-h1{font-family:var(--fd);font-size:46px;font-weight:400;line-height:1.05;letter-spacing:-.03em;margin-bottom:20px}
.l-h1 em{font-style:italic}
.l-p{font-size:14px;color:var(--t3);line-height:1.7;margin-bottom:36px}
.btn-spotify{display:inline-flex;align-items:center;gap:10px;padding:14px 28px;border:none;border-radius:100px;background:var(--w);color:#000;font-family:var(--fb);font-size:14px;font-weight:700;cursor:pointer;transition:all .2s}
.btn-spotify svg{opacity:.85}
.btn-spotify:hover{transform:scale(1.04);box-shadow:0 8px 30px rgba(255,255,255,.08)}
.l-foot{position:absolute;bottom:20px;left:20px;right:20px;display:flex;gap:20px;font-size:10px;color:var(--t4);letter-spacing:1px;font-weight:600;text-transform:uppercase}

/* ═══ SETUP ═══ */
.setup{padding-top:48px;display:flex;flex-direction:column;gap:36px;opacity:0;transform:translateY(20px)}
.setup.in{opacity:1;transform:none;transition:all .6s cubic-bezier(.22,1,.36,1)}
.su-top{display:flex;align-items:center;gap:16px}
.su-av{width:48px;height:48px;border-radius:50%;background:var(--s3);display:flex;align-items:center;justify-content:center;font-family:var(--fd);font-size:20px;font-style:italic;color:var(--t2);border:1px solid var(--bd)}
.su-name{font-family:var(--fd);font-size:20px;font-style:italic}
.su-sub{font-size:11px;color:var(--t3);margin-top:2px;letter-spacing:.5px}
.su-lbl{font-size:10px;font-weight:700;letter-spacing:3px;text-transform:uppercase;color:var(--t4);margin-bottom:12px}
.mode-row{display:grid;grid-template-columns:repeat(3,1fr);gap:8px}
.mode-c{background:var(--s1);border:1.5px solid var(--bd);border-radius:14px;padding:20px 10px 16px;display:flex;flex-direction:column;align-items:center;gap:6px;cursor:pointer;transition:all .2s;color:var(--t1);font-family:var(--fb)}
.mode-c:hover{border-color:var(--t4);background:var(--s2)}
.mode-c.on{border-color:var(--w);background:var(--s2)}
.mc-name{font-family:var(--fd);font-size:17px;font-style:italic}
.mc-sub{font-size:10px;color:var(--t3);letter-spacing:.5px;font-weight:500}
.src-col{display:flex;flex-direction:column;gap:6px}
.src-c{display:flex;align-items:center;gap:14px;padding:16px;background:var(--s1);border:1.5px solid var(--bd);border-radius:12px;cursor:pointer;transition:all .2s;color:var(--t1);font-family:var(--fb);text-align:left}
.src-c:hover{border-color:var(--t4)}.src-c.on{border-color:var(--w)}
.src-txt{flex:1}.src-nm{display:block;font-weight:600;font-size:14px}.src-n{display:block;font-size:10px;color:var(--t3);margin-top:2px}
.src-dot{width:16px;height:16px;border-radius:50%;border:1.5px solid var(--bd2);flex-shrink:0;transition:all .2s}
.src-dot.on{background:var(--w);border-color:var(--w)}
.btn-begin{width:100%;padding:16px;border:none;border-radius:12px;background:var(--s2);color:var(--t4);font-family:var(--fb);font-size:14px;font-weight:700;cursor:not-allowed;transition:all .3s}
.btn-begin.on{background:var(--w);color:#000;cursor:pointer}
.btn-begin.on:hover{box-shadow:0 8px 30px rgba(255,255,255,.08)}

/* ═══ BATTLE ═══ */
.battle{display:flex;flex-direction:column;padding:14px 0 20px}
.b-hd{display:flex;align-items:center;justify-content:space-between;padding:0 20px;margin-bottom:8px}
.b-hd-right{display:flex;align-items:center;gap:10px}
.b-btn{width:34px;height:34px;border-radius:8px;border:1px solid var(--bd);background:transparent;color:var(--t3);font-size:9px;cursor:pointer;display:flex;align-items:center;justify-content:center;letter-spacing:2px;transition:all .15s}
.b-btn:hover{color:var(--t1);border-color:var(--t3)}
.b-ct{font-family:var(--fd);font-size:20px;font-style:italic}
.b-dim{color:var(--t4);font-size:14px}
.b-md{font-size:9px;font-weight:700;letter-spacing:2.5px;text-transform:uppercase;color:var(--t4)}
.b-bar{height:2px;background:var(--s2);margin:0 20px 6px;border-radius:2px;overflow:hidden}
.b-fill{height:100%;border-radius:2px;background:var(--w);transition:width .5s cubic-bezier(.22,1,.36,1)}

/* Undo button */
.undo-btn{
  display:flex;align-items:center;gap:4px;padding:4px 10px;
  border:1px solid var(--bd);border-radius:8px;background:transparent;
  color:var(--t3);font-family:var(--fb);font-size:10px;font-weight:600;
  cursor:pointer;transition:all .2s;animation:undoIn .3s ease;
}
.undo-btn:hover{color:var(--t1);border-color:var(--t3)}
@keyframes undoIn{from{opacity:0;transform:translateX(8px)}to{opacity:1;transform:none}}

/* Micro-stat */
.micro-stat{
  text-align:center;height:20px;margin-bottom:6px;padding:0 20px;
  overflow:hidden;transition:all .4s;
}
.micro-stat span{
  display:inline-block;font-size:11px;color:var(--t3);letter-spacing:.5px;
  animation:statSlide .4s ease;font-weight:500;
}
.micro-stat:not(.show){opacity:0}
@keyframes statSlide{from{opacity:0;transform:translateY(8px)}to{opacity:1;transform:none}}

/* Swipe zone */
.b-zone{display:flex;gap:8px;padding:0 10px;flex:1;min-height:0;align-items:stretch;overflow:visible}
.b-stack{flex:1;position:relative;height:420px;overflow:visible}
.b-vs{display:flex;align-items:center;font-family:var(--fd);font-size:13px;font-style:italic;color:var(--t4);flex-shrink:0;writing-mode:vertical-lr;letter-spacing:4px}

/* Swipe Card */
.sc{position:absolute;inset:0;border-radius:18px;overflow:hidden;user-select:none;touch-action:none;will-change:transform;border:1px solid rgba(255,255,255,.06);transition:box-shadow .3s}
.sc-label{position:absolute;top:16px;z-index:10;font-size:13px;font-weight:800;letter-spacing:4px;padding:5px 14px;border-radius:6px;border:2.5px solid;pointer-events:none;font-family:var(--fb);transition:opacity .08s}
.sc-nope{right:14px;color:#ff4444;border-color:#ff4444;transform:rotate(10deg)}
.sc-pick{left:14px;color:var(--grn);border-color:var(--grn);transform:rotate(-10deg)}
.sc-info{position:absolute;bottom:0;left:0;right:0;z-index:5;padding:28px 18px 20px;background:linear-gradient(transparent,rgba(0,0,0,.65) 25%,rgba(0,0,0,.88))}
.sc-title{font-family:var(--fd);font-size:19px;font-weight:400;font-style:italic;color:var(--w);line-height:1.15;margin-bottom:3px}
.sc-artist{font-size:12px;color:rgba(255,255,255,.6);font-weight:500}
.sc-meta{font-size:10px;color:rgba(255,255,255,.3);margin-top:3px;letter-spacing:.5px}
.sc-play{margin-top:10px;display:inline-flex;align-items:center;gap:6px;padding:6px 14px;border-radius:100px;border:1px solid rgba(255,255,255,.15);background:rgba(255,255,255,.06);color:rgba(255,255,255,.6);font-family:var(--fb);font-size:10px;font-weight:600;letter-spacing:.5px;cursor:pointer;transition:all .15s;backdrop-filter:blur(8px)}
.sc-play:hover{background:rgba(255,255,255,.12);color:var(--w)}

/* Streak badge */
.streak-badge{
  position:absolute;top:14px;left:50%;transform:translateX(-50%);z-index:10;
  padding:4px 12px;border-radius:100px;
  background:rgba(0,0,0,.6);backdrop-filter:blur(8px);
  color:#ffd43b;font-size:11px;font-weight:700;letter-spacing:.5px;
  animation:streakPulse 1.5s ease-in-out infinite;
}
@keyframes streakPulse{0%,100%{opacity:1}50%{opacity:.7}}

/* Upset flash */
.upset-flash{
  position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);z-index:20;
  padding:8px 20px;border-radius:10px;
  background:rgba(255,77,0,.9);color:#fff;
  font-size:16px;font-weight:800;letter-spacing:3px;
  animation:upsetBoom .8s ease forwards;pointer-events:none;
}
@keyframes upsetBoom{
  0%{transform:translate(-50%,-50%) scale(0);opacity:0}
  30%{transform:translate(-50%,-50%) scale(1.3);opacity:1}
  100%{transform:translate(-50%,-50%) scale(1);opacity:0}
}

/* Tap fallbacks */
.b-taps{display:flex;gap:8px;padding:12px 14px 0}
.b-tap{flex:1;padding:10px 8px;border:1px solid var(--bd);border-radius:10px;background:transparent;color:var(--t1);font-family:var(--fb);cursor:pointer;transition:all .15s;display:flex;flex-direction:column;align-items:center;gap:2px}
.b-tap:hover{border-color:var(--t3);background:var(--s1)}
.bt-song{font-size:11px;font-weight:600;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;max-width:100%}
.bt-cta{font-size:9px;color:var(--t4);letter-spacing:1px;font-weight:700;text-transform:uppercase}
.b-skip{padding:10px 16px;border:1px solid var(--bd);border-radius:10px;background:transparent;color:var(--t4);font-family:var(--fb);font-size:10px;font-weight:700;letter-spacing:1.5px;text-transform:uppercase;cursor:pointer;transition:all .15s;flex-shrink:0}
.b-skip:hover{color:var(--t2);border-color:var(--t3)}

/* Pause */
.pause-scr{display:flex;align-items:center;justify-content:center}
.pa-box{text-align:center;background:var(--s1);border:1px solid var(--bd);border-radius:20px;padding:44px 32px;width:100%}
.pa-ic{font-size:24px;color:var(--t4);margin-bottom:16px;letter-spacing:4px}
.pa-t{font-family:var(--fd);font-size:26px;font-style:italic;margin-bottom:8px}
.pa-s{font-size:11px;color:var(--t3);margin-bottom:24px;letter-spacing:.5px}
.pa-bar{height:3px;border-radius:3px;background:var(--bg);overflow:hidden;margin-bottom:28px}
.pa-fill{height:100%;border-radius:3px;background:var(--w)}
.btn-resume{padding:13px 28px;border:none;border-radius:10px;background:var(--w);color:#000;font-family:var(--fb);font-size:13px;font-weight:700;cursor:pointer}

/* ═══ RESULTS ═══ */
.results{padding-top:40px;padding-bottom:80px;opacity:0;transform:translateY(16px)}
.results.in{opacity:1;transform:none;transition:all .7s cubic-bezier(.22,1,.36,1)}
.conf-box{position:fixed;top:0;left:0;right:0;height:100vh;pointer-events:none;overflow:hidden;z-index:100}
.cnf{position:absolute;top:-20px;border-radius:1px;background:hsl(var(--hu),70%,55%);animation:cfall var(--dr) var(--dl) ease-out forwards}
@keyframes cfall{0%{transform:translateY(0) rotate(0);opacity:1}100%{transform:translateY(105vh) rotate(var(--rt));opacity:0}}

.r-top{text-align:center;margin-bottom:36px}
.r-tag{font-size:9px;font-weight:700;letter-spacing:4px;color:var(--t4);text-transform:uppercase}
.r-h1{font-family:var(--fd);font-size:52px;font-weight:400;font-style:italic;letter-spacing:-.03em;margin-top:8px}
.r-sub{font-size:11px;color:var(--t4);margin-top:6px;letter-spacing:.5px}

.spot{position:relative;border-radius:20px;overflow:hidden;height:300px;margin-bottom:24px}
.spot-over{position:absolute;inset:0;z-index:2;display:flex;flex-direction:column;justify-content:flex-end;padding:28px 24px;background:linear-gradient(transparent 30%,rgba(0,0,0,.75) 70%,rgba(0,0,0,.9))}
.spot-rank{font-size:10px;font-weight:700;letter-spacing:5px;color:rgba(255,255,255,.4);margin-bottom:8px}
.spot-t{font-family:var(--fd);font-size:30px;font-style:italic;color:var(--w);line-height:1.1}
.spot-a{font-size:14px;color:rgba(255,255,255,.6);margin-top:4px;font-weight:500}
.spot-m{font-size:10px;color:rgba(255,255,255,.3);margin-top:4px;letter-spacing:.5px}

.st-row{display:grid;grid-template-columns:repeat(3,1fr);gap:8px;margin-bottom:28px}
.st-card{background:var(--s1);border:1px solid var(--bd);border-radius:14px;padding:18px 10px;text-align:center;display:flex;flex-direction:column;gap:5px}
.st-v{font-family:var(--fd);font-size:16px;font-style:italic;color:var(--t1)}
.st-l{font-size:9px;font-weight:700;letter-spacing:2px;text-transform:uppercase;color:var(--t4)}
.st-d{font-size:9px;color:var(--t4)}

/* Tabs */
.tabs{display:flex;gap:4px;margin-bottom:20px;overflow-x:auto;-webkit-overflow-scrolling:touch}
.tab{
  padding:8px 14px;border:1px solid var(--bd);border-radius:100px;
  background:transparent;color:var(--t3);font-family:var(--fb);
  font-size:11px;font-weight:600;cursor:pointer;transition:all .15s;
  white-space:nowrap;flex-shrink:0;
}
.tab:hover{color:var(--t1);border-color:var(--t3)}
.tab.on{background:var(--w);color:#000;border-color:var(--w)}

/* Rankings */
.rk-row{display:flex;align-items:center;gap:12px;padding:10px 0;border-bottom:1px solid var(--bd);opacity:0;animation:rkIn .35s var(--dl) forwards}
@keyframes rkIn{from{opacity:0;transform:translateX(-8px)}to{opacity:1;transform:none}}
.rk-n{width:28px;text-align:center;font-size:14px;color:var(--t1);flex-shrink:0;letter-spacing:1px;font-weight:700}
.rk-n.gld{font-size:17px}
.rk-inf{flex:1;min-width:0;display:flex;flex-direction:column;gap:2px}
.rk-t{font-weight:600;font-size:13px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;color:var(--t1)}
.rk-a{font-size:11px;color:var(--t2)}
.rk-e{font-size:10px;color:var(--t4);letter-spacing:.5px;font-weight:500}

/* ═══ TASTE DNA ═══ */
.dna-wrap{padding:8px 0}
.dna-title{font-family:var(--fd);font-size:18px;font-style:italic;margin-bottom:12px}
.dna-svg{width:100%;max-width:280px;display:block;margin:0 auto}
.dna-shape{animation:dnaReveal .8s ease forwards}
@keyframes dnaReveal{from{opacity:0;transform:scale(.8)}to{opacity:1;transform:scale(1)}}
.dna-stats{margin-top:16px;display:flex;flex-direction:column;gap:10px}
.dna-st{display:flex;align-items:center;gap:10px}
.dna-bar-wrap{flex:1;height:4px;background:var(--s2);border-radius:4px;overflow:hidden}
.dna-bar-fill{height:100%;border-radius:4px;background:var(--w);transition:width .8s ease;animation:barGrow .8s ease}
.dna-bar-alt{background:#ff4d4d}
@keyframes barGrow{from{width:0}}
.dna-st-l{font-size:11px;color:var(--t3);white-space:nowrap;font-weight:500}
.dna-decades{display:flex;gap:8px;flex-wrap:wrap;margin-top:4px}
.dna-dec{font-size:10px;color:var(--t4);padding:3px 8px;border:1px solid var(--bd);border-radius:6px}
.dna-dec em{font-style:normal;color:var(--t2);margin-left:3px}

/* ═══ SWIPE REPLAY ═══ */
.replay-wrap{padding:8px 0}
.replay-hd{display:flex;align-items:center;justify-content:space-between;margin-bottom:12px}
.replay-tag{font-family:var(--fd);font-size:18px;font-style:italic}
.replay-btn{padding:6px 16px;border:1px solid var(--bd);border-radius:100px;background:transparent;color:var(--t1);font-family:var(--fb);font-size:11px;font-weight:600;cursor:pointer;transition:all .15s}
.replay-btn:hover{background:var(--w);color:#000;border-color:var(--w)}
.replay-ct{font-size:12px;color:var(--t3)}
.replay-stage{min-height:80px;display:flex;align-items:center;justify-content:center}
.replay-hint{font-size:12px;color:var(--t4)}
.replay-card{animation:replaySlide .4s ease}
@keyframes replaySlide{from{opacity:0;transform:translateY(12px)}to{opacity:1;transform:none}}
.rc-pair{display:flex;align-items:center;gap:12px;padding:12px;background:var(--s1);border:1px solid var(--bd);border-radius:14px;width:100%}
.rc-song{display:flex;align-items:center;gap:8px;flex:1;min-width:0}
.rc-name{font-size:12px;font-weight:600;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}
.rc-win{color:var(--t1)}.rc-lose{opacity:.35}
.rc-vs{font-family:var(--fd);font-size:11px;font-style:italic;color:var(--t4);flex-shrink:0}
.rc-upset{display:inline-block;margin-top:8px;padding:2px 8px;border-radius:4px;background:rgba(255,77,0,.15);color:#ff6633;font-size:10px;font-weight:700;letter-spacing:1px}
.replay-end{text-align:center}
.replay-end span{font-size:28px;display:block;margin-bottom:6px}
.replay-end p{font-size:12px;color:var(--t3)}

/* ═══ GHOST BATTLES ═══ */
.ghost-wrap{padding:8px 0}
.ghost-hd{display:flex;align-items:center;justify-content:space-between;margin-bottom:8px}
.ghost-tag{font-family:var(--fd);font-size:18px;font-style:italic}
.ghost-ct{font-size:12px;color:var(--t3)}
.ghost-q{font-size:12px;color:var(--t4);margin-bottom:14px}
.ghost-pair{display:flex;align-items:center;gap:10px}
.ghost-card{
  flex:1;display:flex;align-items:center;gap:10px;padding:12px;
  background:var(--s1);border:1px solid var(--bd);border-radius:14px;
  cursor:pointer;transition:all .2s;color:var(--t1);font-family:var(--fb);text-align:left;
}
.ghost-card:hover{border-color:var(--t3);background:var(--s2);transform:scale(1.02)}
.gc-info{flex:1;min-width:0}
.gc-t{display:block;font-size:12px;font-weight:600;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}
.gc-a{display:block;font-size:10px;color:var(--t3)}
.ghost-vs{font-family:var(--fd);font-size:12px;font-style:italic;color:var(--t4);flex-shrink:0}
.ghost-done{text-align:center;padding:24px}
.ghost-check{font-size:28px;margin-bottom:8px}
.ghost-done p{font-size:12px;color:var(--t3)}

/* ═══ EXPORT ═══ */
.ex{margin-top:28px;text-align:center;display:flex;flex-direction:column;align-items:center;gap:12px}
.btn-ex{display:inline-flex;align-items:center;gap:10px;padding:14px 26px;border:none;border-radius:100px;background:var(--grn);color:#000;font-family:var(--fb);font-size:13px;font-weight:700;cursor:pointer;transition:all .2s}
.btn-ex:hover{transform:scale(1.04);box-shadow:0 6px 24px rgba(30,215,96,.2)}
.btn-sh{padding:10px 22px;border:1px solid var(--bd);border-radius:100px;background:transparent;color:var(--t3);font-family:var(--fb);font-size:12px;font-weight:600;cursor:pointer;transition:all .15s}
.btn-sh:hover{color:var(--t1);border-color:var(--t3)}
.ex-ld{display:flex;flex-direction:column;align-items:center;gap:12px}
.ex-sp{width:24px;height:24px;border:2px solid var(--bd);border-top-color:var(--t1);border-radius:50%;animation:spin .6s linear infinite}
@keyframes spin{to{transform:rotate(360deg)}}
.ex-ld p{font-size:12px;color:var(--t3)}
.ex-ok{text-align:center}
.ex-ck{width:40px;height:40px;border-radius:50%;background:var(--grn);color:#000;font-size:20px;font-weight:900;display:flex;align-items:center;justify-content:center;margin:0 auto 12px}
.ex-dt{font-family:var(--fd);font-size:20px;font-style:italic}
.ex-ds{font-size:11px;color:var(--t3);margin-top:3px;letter-spacing:.5px}
.btn-open{margin-top:14px;padding:11px 22px;border:none;border-radius:100px;background:var(--grn);color:#000;font-family:var(--fb);font-size:12px;font-weight:700;cursor:pointer}
.btn-re{margin-top:20px;padding:14px;width:100%;border:1px solid var(--bd);border-radius:12px;background:transparent;color:var(--t4);font-family:var(--fb);font-size:12px;font-weight:600;cursor:pointer;transition:all .15s;letter-spacing:.5px}
.btn-re:hover{color:var(--t1);border-color:var(--t3)}

@media(max-width:520px){
  .l-h1{font-size:38px}
  .b-stack{height:380px}
  .r-h1{font-size:42px}
  .spot{height:260px}
  .spot-t{font-size:24px}
  .ghost-pair{flex-direction:column}
  .ghost-card{width:100%}
}